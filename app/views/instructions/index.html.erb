<% @instructions.each do |instruction| %>
  <div class="p-6 bg-white rounded-xl shadow-md hover:shadow-lg transition mb-6">
    
    <!-- Open Link Button -->
    <div class="flex justify-between items-center mb-4">
      <h3 class="text-lg font-semibold text-indigo-700">Instruction</h3>
      <%= link_to "Open Link", track_click_instruction_path(instruction), 
          target: "_blank", 
          class: "inline-block bg-indigo-600 text-white text-sm px-4 py-2 rounded hover:bg-indigo-700 transition" %>
    </div>

    <% if current_admin %>
      <!-- Click Count -->
      <p class="text-sm text-gray-500 mb-2">
        Total Clicks: <span class="font-medium text-gray-800"><%= instruction.instruction_clicks.count %></span>
      </p>

      <!-- Click Logs -->
      <div class="mt-4 bg-gray-50 p-4 rounded border border-gray-200">
        <h4 class="text-sm font-semibold text-gray-700 mb-2">Click Logs</h4>
        <% if instruction.instruction_clicks.any? %>
          <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
            <% instruction.instruction_clicks.each do |click| %>
              <li>
                <span class="text-indigo-700 font-medium"><%= click.user.email %></span>
                <span class="text-gray-500">at <%= click.clicked_at.strftime("%Y-%m-%d %H:%M") %></span>
              </li>
            <% end %>
          </ul>
        <% else %>
          <p class="text-sm text-gray-400 italic">No clicks yet.</p>
        <% end %>
      </div>
    <% end %>
  </div>
<% end %>
